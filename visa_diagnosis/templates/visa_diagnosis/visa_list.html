{% extends 'visa_diagnosis/base.html' %}

{% block title %}åœ¨ç•™è³‡æ ¼ä¸€è¦§{% endblock %}

{% block extra_css %}
<style>
    .visa-card {
        background: white;
        border-radius: 8px;
        padding: 1.5rem;
        margin-bottom: 1.5rem;
        border-left: 5px solid #667eea;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        transition: transform 0.2s, box-shadow 0.2s;
    }
    
    .visa-card:hover {
        transform: translateX(5px);
        box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
    }
    
    .visa-badge {
        display: inline-block;
        padding: 0.25rem 0.75rem;
        border-radius: 15px;
        font-size: 0.85rem;
        font-weight: 600;
        margin-left: 0.5rem;
    }
    
    .badge-work {
        background: #bee3f8;
        color: #2c5282;
    }
    
    .badge-specified {
        background: #fbd38d;
        color: #7c2d12;
    }
    
    .badge-activity {
        background: #c6f6d5;
        color: #22543d;
    }
</style>
{% endblock %}

{% block content %}
<div class="card">
    <h2 style="color: #667eea; margin-bottom: 1rem;">ğŸ“‹ åœ¨ç•™è³‡æ ¼ä¸€è¦§</h2>
    <p style="margin-bottom: 2rem;">
        æ—¥æœ¬ã§å°±åŠ´å¯èƒ½ãªä¸»è¦ãªåœ¨ç•™è³‡æ ¼ã®ä¸€è¦§ã§ã™ã€‚å„åœ¨ç•™è³‡æ ¼ã®è¦ä»¶ã¨ç‰¹å¾´ã‚’ç¢ºèªã§ãã¾ã™ã€‚
    </p>
</div>

{% for visa in visas %}
<div class="visa-card">
    <div style="margin-bottom: 1rem;">
        <h3 style="color: #2d3748; display: inline-block;">
            {{ visa.name_ja }}
        </h3>
        <span class="visa-badge {% if visa.category_type == 'work' %}badge-work{% elif visa.category_type == 'specified' %}badge-specified{% else %}badge-activity{% endif %}">
            {{ visa.get_category_type_display }}
        </span>
    </div>
    
    <p style="color: #718096; margin-bottom: 0.5rem;">
        <strong>English:</strong> {{ visa.name_en }}
    </p>
    
    <p style="margin-bottom: 1rem;">
        {{ visa.description }}
    </p>
    
    {% if visa.requirements.all %}
    <details style="margin-top: 1rem;">
        <summary style="cursor: pointer; color: #667eea; font-weight: 600;">
            ğŸ“Œ è¦ä»¶ã‚’è¦‹ã‚‹ï¼ˆ{{ visa.requirements.count }}é …ç›®ï¼‰
        </summary>
        <div style="margin-top: 1rem; padding: 1rem; background: #f8f9fa; border-radius: 5px;">
            {% for req in visa.requirements.all %}
            <div style="margin-bottom: 0.75rem; padding: 0.75rem; background: white; border-radius: 5px;">
                <strong style="color: #2d3748;">
                    {{ req.get_requirement_type_display }}
                    {% if req.is_mandatory %}<span style="color: #e53e3e;">ï¼ˆå¿…é ˆï¼‰</span>{% else %}<span style="color: #718096;">ï¼ˆæ¨å¥¨ï¼‰</span>{% endif %}
                </strong>
                <p style="margin-top: 0.25rem;">{{ req.condition }}</p>
                {% if req.alternative_condition %}
                <p style="margin-top: 0.25rem; color: #718096; font-size: 0.9rem;">
                    <strong>ä»£æ›¿æ¡ä»¶:</strong> {{ req.alternative_condition }}
                </p>
                {% endif %}
            </div>
            {% endfor %}
        </div>
    </details>
    {% endif %}
</div>
{% endfor %}

<div style="text-align: center; margin-top: 2rem;">
    <a href="{% url 'visa_diagnosis:diagnosis_form' %}" class="btn">
        ğŸ” è¨ºæ–­ã‚’é–‹å§‹ã™ã‚‹
    </a>
</div>
{% endblock %}
